// @ts-check

/** @type {HTMLInputElement} */
// @ts-ignore
const activate = document.getElementById("activate");

const countElements = {
  tries: document.getElementById("tries"),
  skips: document.getElementById("skips"),
  maybe: document.getElementById("maybe"),
  works: document.getElementById("works"),
  notWorks: document.getElementById("notWorks"),
};

async function onLoad() {
  chrome.storage.local.get((data) => {
    Object.keys(countElements)
      .filter((key) => data[key] !== undefined)
      .forEach((key) => (countElements[key].innerText = data[key]));
  });
}

activate.addEventListener("click", async () => {
  await chrome.storage.local.set({active: activate.checked});
});

chrome.storage.onChanged.addListener((data) => {
  Object.keys(countElements)
    .filter((key) => data[key]?.newValue !== undefined)
    .forEach((key) => (countElements[key].innerText = data[key]));
});

onLoad().catch(console.error);
